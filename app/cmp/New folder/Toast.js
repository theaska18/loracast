Ext.define("App.cmp.Toast",{extend:"App.cmp.Window",modal:!1,xtype:"toast",isToast:!0,cls:Ext.baseCSSPrefix+"toast",bodyPadding:10,title:"Info",autoClose:!0,plain:!1,draggable:!1,resizable:!1,shadow:!1,focus:Ext.emptyFn,anchor:null,useXAxis:!1,autoHeight:!0,align:"tr",animate:!0,msg:"",spacing:6,paddingX:30,layout:{type:"hbox",align:"stretch"},paddingY:10,slideInAnimation:"easeIn",slideBackAnimation:"bounceOut",slideInDuration:1500,slideBackDuration:1e3,hideDuration:500,autoCloseDelay:3e3,stickOnClick:!0,stickWhileHover:!0,closeOnMouseDown:!1,isHiding:!1,border:!1,isFading:!1,destroyAfterHide:!1,closeOnMouseOut:!1,xPos:0,yPos:0,maxWidth:350,toast:function(i){void 0!=i.msg&&this.items.items[1].setValue(i.msg),void 0!=i.type?"warning"==i.type?(this.title="Peringatan",this.items.items[0].update('<div class="fa" style="font-family:FontAwesome;font-size:50px !important;">&#xf071;</div>&nbsp;')):"error"==i.type?(this.title="Kesalahan",this.items.items[0].update('<div class="fa" style="font-family:FontAwesome;font-size:50px !important;">&#xf057;</div>&nbsp;')):"privilege"==i.type?(this.title="Hak Istimewa",this.items.items[0].update('<div class="fa" style="font-family:FontAwesome;font-size:50px !important;">&#xf091;</div>&nbsp;')):"success"==i.type&&(this.title="Sukses",this.items.items[0].update('<div class="fa" style="font-family:FontAwesome;font-size:50px !important;">&#xf058;</div>&nbsp;')):(this.title="Informasi",this.items.items[0].update('<div class="fa" style="font-family:FontAwesome;font-size:50px !important;">&#xf05a;</div>&nbsp;')),this.show(),this.setHeight(this.items.items[1].getHeight()+60),Ext.WindowManager.bringToFront(this);},initComponent:function(){var i=this;i.items=[{xtype:'panel',html:'<div class="fa" style="font-family:FontAwesome;font-size:50px !important;">&#xf059;</div>&nbsp;',cls:'i-transparent',width: 50,border:false},{xtype:"displayfield",style:"margin-top:5px;margin-right:10px;margin-left:10px;",maxWidth:280,autoHeight:!0,value:i.msg}],i.updateAlignment(i.align),i.setAnchor(i.anchor),i.callParent()},onRender:function(){var i=this;i.callParent(arguments),i.el.hover(i.onMouseEnter,i.onMouseLeave,i),i.closeOnMouseDown&&Ext.getDoc().on("mousedown",i.onDocumentMousedown,i)},alignmentProps:{br:{paddingFactorX:-1,paddingFactorY:-1,siblingAlignment:"br-br",anchorAlign:"tr-br"},bl:{paddingFactorX:1,paddingFactorY:-1,siblingAlignment:"bl-bl",anchorAlign:"tl-bl"},tr:{paddingFactorX:-1,paddingFactorY:1,siblingAlignment:"tr-tr",anchorAlign:"br-tr"},tl:{paddingFactorX:1,paddingFactorY:1,siblingAlignment:"tl-tl",anchorAlign:"bl-tl"},b:{paddingFactorX:0,paddingFactorY:-1,siblingAlignment:"b-b",useXAxis:0,anchorAlign:"t-b"},t:{paddingFactorX:0,paddingFactorY:1,siblingAlignment:"t-t",useXAxis:0,anchorAlign:"b-t"},l:{paddingFactorX:1,paddingFactorY:0,siblingAlignment:"l-l",useXAxis:1,anchorAlign:"r-l"},r:{paddingFactorX:-1,paddingFactorY:0,siblingAlignment:"r-r",useXAxis:1,anchorAlign:"l-r"},x:{br:{anchorAlign:"bl-br"},bl:{anchorAlign:"br-bl"},tr:{anchorAlign:"tl-tr"},tl:{anchorAlign:"tr-tl"}}},updateAlignment:function(i){var t=this,n=t.alignmentProps,e=n[i],o=n.x[i];o&&t.useXAxis&&Ext.applyIf(t,o),Ext.applyIf(t,e)},getXposAlignedToAnchor:function(){var i=this,t=i.align,n=i.anchor,e=n&&n.el,o=i.el,s=0;return e&&e.dom&&(i.useXAxis?"br"===t||"tr"===t||"r"===t?(s+=e.getAnchorXY("r")[0],s-=o.getWidth()+i.paddingX):(s+=e.getAnchorXY("l")[0],s+=i.paddingX):s=o.getLeft()),s},getYposAlignedToAnchor:function(){var i=this,t=i.align,n=i.anchor,e=n&&n.el,o=i.el,s=0;return e&&e.dom&&(i.useXAxis?s=o.getTop():"br"===t||"bl"===t||"b"===t?(s+=e.getAnchorXY("b")[1],s-=o.getHeight()+i.paddingY):(s+=e.getAnchorXY("t")[1],s+=i.paddingY)),s},getXposAlignedToSibling:function(i){var t,n=this,e=n.align,o=n.el;return t=n.useXAxis?"tl"===e||"bl"===e||"l"===e?i.xPos+i.el.getWidth()+i.spacing:i.xPos-o.getWidth()-n.spacing:o.getLeft()},getYposAlignedToSibling:function(i){var t,n=this,e=n.align,o=n.el;return t=n.useXAxis?o.getTop():"tr"===e||"tl"===e||"t"===e?i.yPos+i.el.getHeight()+i.spacing:i.yPos-o.getHeight()-i.spacing},getToasts:function(){var i=this.anchor,t=this.anchorAlign,n=i.activeToasts||(i.activeToasts={});return n[t]||(n[t]=[])},setAnchor:function(i){var t,n=this;n.anchor=i="string"==typeof i?Ext.getCmp(i):i,i||(t=App.cmp.Toast,n.anchor=t.bodyAnchor||(t.bodyAnchor={el:Ext.getBody()}))},beforeShow:function(){var i=this;i.stickOnClick&&i.body.on("click",function(){i.cancelAutoClose()}),i.autoClose&&(i.closeTask||(i.closeTask=new Ext.util.DelayedTask(i.doAutoClose,i)),i.closeTask.delay(i.autoCloseDelay)),i.el.setX(-1e4),i.el.setOpacity(1)},afterShow:function(){var i,t,n,e,o=this,s=o.el;o.callParent(arguments),i=o.getToasts(),n=i.length,t=n&&i[n-1],t?(s.alignTo(t.el,o.siblingAlignment,[0,0]),o.xPos=o.getXposAlignedToSibling(t),o.yPos=o.getYposAlignedToSibling(t)):(s.alignTo(o.anchor.el,o.anchorAlign,[o.paddingX*o.paddingFactorX,o.paddingY*o.paddingFactorY],!1),o.xPos=o.getXposAlignedToAnchor(),o.yPos=o.getYposAlignedToAnchor()),Ext.Array.include(i,o),o.animate?(e=s.getXY(),s.animate({from:{x:e[0],y:e[1]},to:{x:o.xPos,y:o.yPos,opacity:1},easing:o.slideInAnimation,duration:o.slideInDuration,dynamic:!0})):o.setLocalXY(o.xPos,o.yPos)},onDocumentMousedown:function(i){this.isVisible()&&!this.owns(i.getTarget())&&this.hide()},slideBack:function(){var i=this,t=i.anchor,n=t&&t.el,e=i.el,o=i.getToasts(),s=Ext.Array.indexOf(o,i);!i.isHiding&&e&&e.dom&&n&&n.isVisible()&&(s?(i.xPos=i.getXposAlignedToSibling(o[s-1]),i.yPos=i.getYposAlignedToSibling(o[s-1])):(i.xPos=i.getXposAlignedToAnchor(),i.yPos=i.getYposAlignedToAnchor()),i.stopAnimation(),i.animate&&e.animate({to:{x:i.xPos,y:i.yPos},easing:i.slideBackAnimation,duration:i.slideBackDuration,dynamic:!0}))},update:function(){var i=this;i.isVisible()&&(i.isHiding=!0,i.hide()),i.callParent(arguments),i.show()},cancelAutoClose:function(){var i=this.closeTask;i&&i.cancel()},doAutoClose:function(){var i=this;i.stickWhileHover&&i.mouseIsOver?i.closeOnMouseOut=!0:i.close()},onMouseEnter:function(){this.mouseIsOver=!0},onMouseLeave:function(){var i=this;i.mouseIsOver=!1,i.closeOnMouseOut&&(i.closeOnMouseOut=!1,i.close())},removeFromAnchor:function(){var i,t,n=this;if(n.anchor&&(i=n.getToasts(),t=Ext.Array.indexOf(i,n),-1!==t))for(Ext.Array.erase(i,t,1);t<i.length;t++)i[t].slideBack()},getFocusEl:Ext.emptyFn,hide:function(){var i=this,t=i.el;return i.cancelAutoClose(),i.isHiding?i.isFading||(i.callParent(arguments),i.removeFromAnchor(),i.isHiding=!1):(i.isHiding=!0,i.isFading=!0,i.cancelAutoClose(),t&&(i.animate?t.fadeOut({opacity:0,easing:"easeIn",duration:i.hideDuration,listeners:{afteranimate:function(){i.isFading=!1,i.hide(i.animateTarget,i.doClose,i)}}}):(i.isFading=!1,i.hide(i.animateTarget,i.doClose,i)))),i}});