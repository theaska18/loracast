tinymce.PluginManager.add("image",function(t){function e(){var e=null,n=null,a=null,i=null,l=Ext.create("IWindow",{title:"Upload",layout:"fit",border:!1,width:400,fbar:[{xtype:"button",text:"Ok",handler:function(){var e=a.getValue(),n=i.getValue();null!=e&&""!=e.trim()?null!=n&&""!=n.trim()?(t.selection.setContent('<a href="'+e+'&w=300" title="'+n+'"><img alt="'+n+'" src="'+e+'&w=300" /></a><br>'),l.close()):(Ext.create("IToast").toast({msg:"Link Tidak Ada.",type:"error"}),i.focus()):(Ext.create("IToast").toast({msg:"Link Tidak Ada.",type:"error"}),a.focus())}},{xtype:"button",text:"Close",handler:function(){l.close()}}],items:[{xtype:"ipanel",items:[{xtype:"iinput",label:"Url",items:[a=Ext.create("ITextField",{name:"f1",margin:!1,emptyText:"Url",columnWidth:.99}),{xtype:"button",margin:!1,text:"Upload",handler:function(){e=Ext.create("IWindow",{title:"File Manager",layout:"fit",width:300,height:300,fbar:[{xtype:"button",text:"Select",handler:function(){var t=n.getLink();null!=t?(a.setValue(t),e.close()):Ext.create("IToast").toast({msg:"File Belum dipilih.",type:"error"})}},{xtype:"button",text:"Close",handler:function(){e.close()}}],items:[n=new Ext.create("IFileManager",{user:_employee_id})]}).show()}}]},i=Ext.create("ITextField",{fieldLabel:"Alt",flex:1,name:"f2"})]}]}).show()}t.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:function(){e()},stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"}),t.addMenuItem("image",{icon:"image",text:"Insert image",onclick:function(){e()},context:"insert",prependToContext:!0}),t.addCommand("mceImage",function(){e()})});